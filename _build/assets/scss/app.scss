$bg-color:    #fff;
$light-color: #aaa;
$dark-color:  #555;
$gutter-pad:  37px;

.markdown-container {
  position: relative;
  border-radius: 3px;
  overflow: hidden;
  background-color: $bg-color !important;

  .ace_gutter {
    overflow: visible !important;

    .ace_gutter-layer {
      overflow: visible !important;
    }
  }

  .ace_gutter-active-line {
    background-color: inherit !important;
  }

  .fullscreen-header {
    display: none;
    height: 50px;
    position: initial;
    font-size: 24px;
    padding: 10px 0 10px $gutter-pad;

    input {
      width: 70%;
      background-color: initial;
      color: inherit;
      border: none;
      font-family: inherit;
      font-size: inherit;
    }
  }

  .markdown-wrapper {
    background-color: $bg-color;
  }

  &.fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 9002;
    overflow: hidden;
    border-radius: 0;

    .fullscreen-header {
      display: block;
    }

    .content-md,
    .preview-md {
      display: block;
      position: absolute;
      top: 50px;
      bottom: 0;
      padding: 5px 5px 40px;
    }

    .content-md {
      left: 0;
      right: 0;
      bottom: 24px;
      height: auto !important;
    }

    .preview-md {
      display: none !important;
      background: #ffffff;
      overflow-y: auto;
    }
    .status-bar {
      position: absolute !important;
      left: 0;
      right: 0;
      bottom: -1px;
      top: auto !important;
      z-index: 10;
    }

    &.split {
      .content-md {
        right: 50%;
        width: auto;
        float: none;
      }
      .preview-md {
        float: none;
        left: 50%;
        right: 0;
        width: auto;
        height: auto !important;
      }
      .status-bar {
        top: initial;
        bottom: 0;
        position: absolute;
      }
    }
    &.preview {
      .content-md {
        display: none !important;
      }
      .preview-md {
        display: block !important;
        left: 0;
      }
    }
  }
  &.split {
    .markdown-wrapper {
      display: inline-block;
      width: 100%;
    }
    .content-md {
      float: left;
      width: 48%;
    }
    .preview-md {
      //float: right;
      //width: 48%;
      overflow: scroll;
      display: block !important;
      padding-left: 20px;
    }

    
    &.theme-light .preview-md {
      background: #fefefe;
      box-shadow: inset 6px 0 9px 0 rgba(0,0,0,.05);
    }

    .status-bar {
      //top: -5px;
      //padding-left: 30px;
      //position: relative;
    }
  }
  &.preview {
    .content-md {
      display: none;
    }
    .preview-md {
      display: block !important;
      height: auto !important;
      width: 100% !important;
      float: none !important;
    }
  }
}

.preview-md {
  //  width: 500px !important;
  min-height: 425px;
  display: none;
}

.content-md {
  border: 0;
  border-radius: 0;
  padding-bottom: 0;
}

.preview-button-off {
  color: black;
}

.toolbox,
.preview-button-off{
  position: absolute;
  z-index: 999;

  right: 10px;
  bottom: 0;
}

.toolbox {
  div {
    display: inline;
    padding: 5px;
  }
}


.fullscreen-button,
.splitscreen-button,
.preview-button,
.preview-button-off{
  margin-bottom: 5px;

  &:hover {
    cursor: pointer;
    opacity: 0.6;
  }
}

.preview-button {
  position: relative;
  right: 1px;
}

.status-bar {
  min-height: 25px;
  position: relative !important;
  border: 0;
  font-size: 12px;
  line-height: 25px;
  margin-top: -5px;

  .modx-tv-form-element & {
    margin-top: -10px;
  }
}

.image-upload-wrapper {
  height: 364px;
  width: 750px;
  box-shadow: inset 0 0 5px rgba(0,0,0,.25);
  background-color: #fcfcfc;
  overflow: hidden;
}

.image-upload-wrapper img {
  display: block;
  height: auto;
  max-width: 100%;
}

.markdown-body {
  ul {
    list-style: disc;
  }
  ol {
    list-style: decimal;
  }
}

.hidden {
  display: none;
}

label.link {
  cursor: pointer;
  color: inherit;
  text-decoration: underline;
}

label.link:hover {
  cursor: pointer;
  text-decoration: underline;
}

.upload-bar,
.progress.error,
.progress {
  padding-left: $gutter-pad;
}

.upload-bar {
  .fullscreen & {
    margin-top: 0;
  }
}

.progress {
  box-sizing: border-box;
  background: rgba(10, 158, 0, 0.41);
  width: 0%;
  height: 25px;

  .icon {
    margin-right: 2px;
  }
}

.progress.error {
  color: rgba(255, 255, 255, 0.8) !important;
  background: rgba(255, 0, 0, 0.29);
}

.remove-message {
  cursor: pointer;
}

.markdowneditor-cropper-window {
  .x-window-body {
    padding: 0 !important;
  }
  .x-panel-nofooter {
    display: none;
  }

  .markdowneditor-toolbar {
    background-color: #4d4d4d;
    width: 50px !important;
    height: 364px;

    .x-panel-body {
      width: 50px !important;
    }

    .x-btn {
      border: none;
      border-radius: 0;
      -webkit-box-shadow: none;
      box-shadow: none;
      width: 10px !important;
      background-color: inherit;
      color: #e5e5e5;
      padding-bottom: 10px;
    }
  }

  .markdowneditor-cropper {
    margin-left: 0 !important;
    width: 750px !important;
  }
}

#modx-action-buttons.markdowneditor-fullscreen {
  z-index: 9999;
  top: -4px;
  right: 0;
  background: none;

  #modx-abtn-duplicate,
  #modx-abtn-delete,
  #modx-abtn-cancel,
  #modx-abtn-help{
    display: none;
  }
}

.ace_gutter {
  .ace_gutter-cell {
    i {
      cursor: pointer;
      position: relative;
      top: -6px;
      display: inline-block;
      padding: 6px;
      margin: 0 27px 0 -15px;
      width: 14px;
      height: 14px;
      font-size: 14px;
      line-height: 14px;
      text-align: center;
      vertical-align: middle;
      border-radius: 50%;
      border: 1px solid $light-color;
      background: $bg-color;
      opacity: 0.5;
  
      .ace_dark & {
        border: 1px solid $dark-color;
      }
  
      &:hover {
        opacity: 1;
        transition: all 0.15s ease;
      }
    }
  }

  &.status-bar  {
    
    .toolbox i,
    .progress i {
      border: 0;
      padding: 0;
      margin: 0;
      background: transparent;
      line-height: 25px;
      font-size: 1.33333em;
      opacity: 1;
    }
  }

  .inline-toolbar {
    text-align: left;
    width: 200px;
    margin: -28px 0 0 42px;
    visibility: hidden;
  }
}

.md-icon-rotate-45 {
  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0.5);
  -webkit-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
}

#modx-resource-content {
  .main-wrapper {
    padding: 0 !important;
  }
}